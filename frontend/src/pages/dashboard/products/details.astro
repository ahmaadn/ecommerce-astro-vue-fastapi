---
import ProtectedLayout from '@/layouts/ProtectedLayout.astro'
import EditProduct from '@/components/Products/DetailProduct/EditProduct.vue'
import { getProductByID } from '@/lib/products'

const id = Astro.url.searchParams.get('product') || ''

if (!id) {
    return new Response(null, {
        status: 404,
        statusText: 'not found',
    })
}
const product = await getProductByID(Number(id))
if (!product) {
    return new Response(null, {
        status: 404,
        statusText: 'product not found',
    })
}
---

<ProtectedLayout title="" accessPage="admin">
    <EditProduct client:load product={product} />
</ProtectedLayout>
